<script src="https://giscus.app/client.js"
        data-repo="lewinkoon/hugo-blog"
        data-repo-id="R_kgDOHB709g"
        data-category="Comments"
        data-category-id="DIC_kwDOHB709s4CRWpq"
        data-mapping="specific"
        data-term="{{ .Title }}"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="dark"
        data-lang="es"
        crossorigin="anonymous"
        async>
</script>

<script>
  function setGiscusTeheme(theme) {
      let giscus = document.querySelector('.giscus iframe');
      if (giscus) {
          giscus.contentWindow.postMessage(
              {
                  giscus: {
                      setConfig: {
                          theme: theme
                      }
                  }
              },
              'https://giscus.app'
          )
      }
  }

  addEventListener('message', event => {
      if (event.origin !== 'https://giscus.app') return;
      setGiscusTeheme(document.documentElement.dataset.color)
  });

  window.addEventListener('onColorSchemeChange', (e) => {
      setGiscusTeheme(e.detail)
  })
</script>