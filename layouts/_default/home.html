{{ define "main" }}

<section class="intro">
    <div class="intro-text">
        <h1>Hola, soy <span>Lewin.</span>👨🏿‍🚀</h1>
        <p> {{ .Params.Subtitle }}</p>
    </div>
    <div class="intro-links">
        {{ range .Site.Menus.social }}
        <a href="{{ .URL }}" class="icon">
            {{ partialCached (print .Pre) . }}
            {{ .Name }}
        </a>
        {{ end }}
    </div>
</section>

{{ $pages := .Paginate (where .Site.RegularPages "Section" "articles") }}
{{ $notes := where .Site.RegularPages "Section" "notes" }}
{{ $projects := where .Site.RegularPages "Section" "projects" }}
{{ $archivesPage := first 1 (where .Site.RegularPages "Layout" "eq" "archives") }}

<section class="articles">
    <div class="title">
        <h2>Últimos artículos</h2>
        <span class="line"></span>
        <a href="{{ ref . "articles" }}" >Ver todos</a>
    </div>
    <div class="posts">
        {{ range $pages.Pages }}
        <a href="{{ .RelPermalink }}">
            {{ with index (.Params.categories) 0 }}
            <span class="category" type="{{ . }}">{{ . }}</span>
            {{ end }}
            <div class="post-title">{{ .Title }}</div>
            <span class="line"></span>
            <time>{{ .Date.Format "Jan 02" }}</time>
        </a>
        {{ end }}
    </div>
</section>

{{ if .Site.Params.projects }}
<section class="projects">
    
    <div class="title">
        <h2>Proyectos</h2>
        <span class="line"></span>
    </div>

    <div class="card-list">
        {{ range $projects }}
            <div class="card-item">
                <div class="card-title">{{ .Params.icon }} {{ .Title }}</div>
                <hr>
                <div class="card-content">                
                    <div class="card-desc">{{ .Description }}</div>
                    <div class="card-links">
                    <a href="{{ .RelPermalink }}">📝 Artículo</a>
                    {{ with .Resources.GetMatch "main.pdf" }}
                    <a href="{{ .RelPermalink }}" target="_blank">🗃️ Archivos</a>
                    {{ end }}
                    </div>
                </div>
            </div>
        {{ end }}
        </div>
</section>
{{ end }}

{{ end }}